{{- $title_page := .Title | default "Untitled Page" }}
{{- $title_site := site.Title | default "Moyer Realty Services" }}

{{- if .Params.meta.title }}
    {{- $title_page = .Params.meta.title }}
{{- end }}

{{- if .Params.meta.title_site }}
    {{- $title_site = .Params.meta.title_site }}
{{- else if eq .Page.Type "articles" }}
    {{- $title_site = "Southern Arizona Realty Digest" }}
{{- end }}

{{- $title := printf "%s | %s" $title_page $title_site }}
<title>{{ $title }}</title>
<meta itemprop="name" content="{{ $title }}">
<meta name="application-name" content="{{ $title }}">

<!-- Favicons -->
<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon.png">
<link rel="icon" sizes="48x48" href="/favicons/favicon-48x48.png">
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#ffffff">
<meta name="apple-mobile-web-app-title" content="{{ site.Title | default "Moyer Realty Services" }}">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="white">

<!-- Meta Description -->
{{- $description := site.Params.description | default "Moyer Realty Services - Leading Real Estate Experts in Southern Arizona." }}
{{- if .Params.meta.description }}
    {{- $description = .Params.meta.description }}
{{- end }}
<meta name="description" content="{{ $description }}">
<meta itemprop="description" content="{{ $description }}">

<!-- Canonical URL -->
<base href="{{ .Permalink | default site.BaseURL }}">
<link rel="canonical" href="{{ .Permalink | default site.BaseURL }}" itemprop="url">
<meta name="url" content="{{ .Permalink | default site.BaseURL }}">

<!-- Open Graph Meta Tags -->
<meta property="og:title" content="{{ $title }}">
<meta property="og:site_name" content="{{ site.Title | default "Moyer Realty Services" }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:url" content="{{ .Permalink | default site.BaseURL }}">
<meta property="og:locale" content="{{ .Language.Lang | default "en-US" }}">

{{- $ogImage := .Params.image | default site.Params.defaultOGImage | default "/images/default-placeholder.jpg" }}
<meta property="og:image" content="{{ $ogImage | absURL }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:updated_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z0700" | safeHTML }}">

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ $title }}">
<meta name="twitter:description" content="{{ $description }}">
<meta name="twitter:url" content="{{ .Permalink | default site.BaseURL }}">
<meta property="twitter:image" content="{{ $ogImage | absURL }}">

{{- with site.Params.twitter }}
<meta name="twitter:site" content="@{{ . | replace "@" "" }}">
<meta name="twitter:creator" content="@{{ . | replace "@" "" }}">
{{- end }}

<!-- Sitemap -->
<link rel="sitemap" type="application/xml" title="Sitemap" href="{{ "sitemap.xml" | absURL }}">

<!-- RSS Feed -->
{{- with .OutputFormats.Get "RSS" }}
<link href="{{ .Permalink | default site.BaseURL }}" rel="alternate" type="application/rss+xml" title="{{ site.Title | default "Moyer Realty Services" }}">
{{- end }}

<!-- Robots and Search Engine Meta Tags -->
<meta name="robots" content="index,follow">
<meta name="googlebot" content="index,follow">

<!-- Article-Specific Meta Tags -->
{{- if eq .Section "articles" }}
    <meta property="og:type" content="article">
    <meta property="article:publisher" content="{{ site.Params.facebook | default "https://www.facebook.com/moyerrealtyservices" }}">
    <meta property="og:article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z0700" | safeHTML }}">
    <meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z0700" | safeHTML }}">

    {{ with .Params.author }}
    <meta property="og:article:author" content="{{ . }}">
    <meta property="article:author" content="{{ . }}">
    <meta name="author" content="{{ . }}">
    {{ end }}

    {{ with .Params.category }}
    <meta name="news_keywords" content="{{ index . 0 | default "Real Estate" }}">
    <meta property="article:section" content="{{ index . 0 | default "Real Estate" }}">
    {{ end }}
{{- else }}
    <meta property="og:type" content="website">
{{- end }}